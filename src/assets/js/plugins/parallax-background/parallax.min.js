(function(a){a.iosParallax=function(c,k){var b=this;b.$el=a(c);b.el=c;b.$el.data("iosParallax",b);var h={x:0,y:0};var d={x:0,y:0};var i={x:0,y:0};function j(){var l=b.$el.css("background-image").match(/url\(.*\)/ig);if(!l||l.length<1){throw"No background image found"}return l[0].replace(/url\(|'|"|'|"|\)$/ig,"")}function g(){var l=new Image;l.src=j();return{width:l.width,height:l.height}}function f(){var l=g();h.x=-1*Math.abs(l.width-b.$el.width())/2;h.y=-1*Math.abs(l.height-b.$el.height())/2;d.x=h.x;d.y=h.y;i.x=h.x;i.y=h.y}function e(){b.$el.mousemove(function(r){var q=b.options.movementFactor/b.$el.width();var o=b.options.movementFactor/b.$el.height();var p=r.pageX-(a(window).width()/2);var n=r.pageY-(a(window).height()/2);d.x=q*p*-1+h.x;d.y=o*n*-1+h.y});var l=setInterval(function(){i.x+=((d.x-i.x)/b.options.dampenFactor);i.y+=((d.y-i.y)/b.options.dampenFactor);b.$el.css("background-position",i.x+"px "+i.y+"px")},16);a(window).resize(function(){f()});var m=new Image;m.src=j();a(m).on("load",function(){f()})}b.init=function(){b.options=a.extend({},a.iosParallax.defaultOptions,k);e()};b.init()};a.iosParallax.defaultOptions={movementFactor:50,dampenFactor:36};a.fn.iosParallax=function(b){return this.each(function(){(new a.iosParallax(this,b))})}})(jQuery);